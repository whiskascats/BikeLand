import{_ as P}from"./sidebar-4adfb49e.js";import{u as f,s as h,E as A,o as y,b as u,f as _,g as a,t as d,e,A as C,n as g,r as b,a as L,d as T,G as I,h as x,c as N,q as $,F as w,_ as B}from"./index-c90d5c55.js";const O={class:"left-page"},E={class:"col-12 contact"},U={class:"col-12 d-flex align-items-center"},V=a("i",{class:"fas fa-map-marker-alt"},null,-1),z={class:"ms-1 oneline"},F={class:"col-12 d-flex align-items-center"},M=a("i",{class:"fas fa-clock"},null,-1),R={class:"ms-1 oneline"},j={class:"col-12 d-flex align-items-center"},q=a("i",{class:"fas fa-phone-alt"},null,-1),G={class:"ms-1 oneline"},H={class:"info mt-2"},J={class:"right-page"},K={key:1,class:"right-page-img default"},Q={__name:"attractionsInfo",setup(S){const c=f(),{chooseAttraction:t,open:i}=h(c),m=A({backgroundImage:`url(${t.value.Picture.PictureUrl1})`});return y(async()=>{const o=await c.getAttractionsMoreInfo(`contains(ScenicSpotID,'${t.value.ScenicSpotID}')`);o.length>0&&(t.Address=o[0].Address,t.OpenTime=o[0].OpenTime,i.value=!0)}),(o,r)=>(u(),_("div",{class:g(["attraction-page",{open:e(i)}])},[a("div",O,[a("h2",null,d(e(t).ScenicSpotName),1),a("div",E,[a("div",U,[V,a("p",z,d(e(t).Address||"資料建置中"),1)]),a("div",F,[M,a("p",R,d(e(t).OpenTime||"資料建置中"),1)]),a("div",j,[q,a("p",G,d(e(t).Phone||"資料建置中"),1)])]),a("div",H,d(e(t).DescriptionDetail),1)]),a("div",J,[e(t).Picture.PictureUrl1?(u(),_("div",{key:0,class:"right-page-img",style:C(m)},null,4)):(u(),_("div",K))]),a("div",{class:"page-bar",onClick:r[0]||(r[0]=v=>i.value=!e(i))},[a("div",{class:g(["triangle",{active:e(i)}])},null,2)])],2))}},Y={__name:"Attractions",setup(S){const c=f(),{userLocation:t,searchParams:i,cityDataList:m,attractionsTab:o,chooseAttraction:r}=h(c),v=b([]);y(async()=>{if(L(),r.value={},t.value.length>0){const s=await c.getUserCityName(t.value[0],t.value[1]);if("city"in s||"county"in s){const n=m.value.find(l=>l.city_name==s.city||l.city_name==s.county);n&&(p(n.city_value),i.value.city=n.city_value)}}});const p=async s=>{let n;o.value==1?n=await c.getAttractionsData(s):n=await c.getRestaurantData(s),n.map((l,D)=>{l.sid=D,l.distance=T(t.value[0],t.value[1],l.Position.PositionLat,l.Position.PositionLon)}),I(n),v.value=n},k=async s=>{o.value=s,s==2&&setTimeout(()=>{o.value=1,alert("餐廳資料建置中!!")},500)};return(s,n)=>(u(),_(w,null,[x(P,{cardList:v.value,tab:e(o),onChangeCity:p,onChangeTab:k},null,8,["cardList","tab"]),e(B).isEmpty(e(r))?$("",!0):(u(),N(Q,{key:e(r).ScenicSpotID}))],64))}};export{Y as default};
