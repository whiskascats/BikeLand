import{_ as A,a as C}from"./sidebar-062ab9a7.js";import{u as h,s as g,o as y,b as d,e as m,f as t,t as r,d as s,n as v,r as T,a as b,A as x,g as I,c as L,q as P,F as N}from"./index-72e18a07.js";const w={class:"left-page"},B={class:"contact"},$={class:"col-12 d-flex align-items-center"},O=t("i",{class:"fas fa-map-marker-alt"},null,-1),U={class:"ms-1"},V={class:"col-12 d-flex align-items-center"},E=t("i",{class:"fas fa-clock"},null,-1),F={class:"ms-1"},M={class:"col-12 d-flex align-items-center"},R=t("i",{class:"fas fa-phone-alt"},null,-1),q={class:"ms-1"},z={class:"info mt-2"},j={class:"right-page"},G=["src"],H={key:1,class:"default-img"},J={__name:"attractionsInfo",setup(S){const n=h(),{chooseAttraction:a,open:o}=g(n);return y(async()=>{const l=await n.getAttractionsMoreInfo(`contains(ScenicSpotID,'${a.value.ScenicSpotID}')`);l.length>0&&(a.Address=l[0].Address,a.OpenTime=l[0].OpenTime,o.value=!0)}),(l,i)=>(d(),m("div",{class:v(["attraction-page",{open:s(o)}])},[t("div",w,[t("h2",null,r(s(a).ScenicSpotName),1),t("div",B,[t("div",$,[O,t("p",U,r(s(a).Address||"資料建置中"),1)]),t("div",V,[E,t("p",F,r(s(a).OpenTime||"資料建置中"),1)]),t("div",M,[R,t("p",q,r(s(a).Phone||"資料建置中"),1)])]),t("div",z,r(s(a).DescriptionDetail),1)]),t("div",j,[s(a).Picture.PictureUrl1?(d(),m("img",{key:0,class:"img-fluid",src:s(a).Picture.PictureUrl1,alt:""},null,8,G)):(d(),m("div",H))]),t("div",{class:"page-bar",onClick:i[0]||(i[0]=_=>o.value=!s(o))},[t("div",{class:v(["triangle",{active:s(o)}])},null,2)])],2))}},W={__name:"Attractions",setup(S){const n=h(),{userLocation:a,searchParams:o,cityDataList:l,attractionsTab:i,chooseAttraction:_}=g(n),p=T([]);y(async()=>{if(b(),_.value={},a.value.length>0){const e=await n.getUserCityName(a.value[0],a.value[1]);if("city"in e||"county"in e){const c=l.value.find(u=>u.city_name==e.city||u.city_name==e.county);c&&(f(c.city_value),o.value.city=c.city_value)}}});const f=async e=>{let c;i.value==1?c=await n.getAttractionsData(e):c=await n.getRestaurantData(e),c.map((u,k)=>{u.sid=k}),x(c),p.value=c},D=async e=>{i.value=e,e==2&&setTimeout(()=>{i.value=1,alert("餐廳資料建置中!!")},500)};return(e,c)=>(d(),m(N,null,[I(A,{cardList:p.value,tab:s(i),onChangeCity:f,onChangeTab:D},null,8,["cardList","tab"]),s(C).isEmpty(s(_))?P("",!0):(d(),L(J,{key:s(_).ScenicSpotID}))],64))}};export{W as default};
