import{_ as C}from"./sidebar-a7ab1b41.js";import{u as f,s as h,C as b,o as y,b as d,f as _,g as t,t as r,e as a,D as A,n as g,r as T,a as I,E as x,h as L,c as P,q as N,F as $,_ as w}from"./index-54377616.js";const B={class:"left-page"},O={class:"col-12 contact"},E={class:"col-12 d-flex align-items-center"},U=t("i",{class:"fas fa-map-marker-alt"},null,-1),V={class:"ms-1 oneline"},z={class:"col-12 d-flex align-items-center"},F=t("i",{class:"fas fa-clock"},null,-1),M={class:"ms-1 oneline"},R={class:"col-12 d-flex align-items-center"},j=t("i",{class:"fas fa-phone-alt"},null,-1),q={class:"ms-1 oneline"},G={class:"info mt-2"},H={class:"right-page"},J={key:1,class:"right-page-img default"},K={__name:"attractionsInfo",setup(S){const o=f(),{chooseAttraction:e,open:i}=h(o),m=b({backgroundImage:`url(${e.value.Picture.PictureUrl1})`});return y(async()=>{const c=await o.getAttractionsMoreInfo(`contains(ScenicSpotID,'${e.value.ScenicSpotID}')`);c.length>0&&(e.Address=c[0].Address,e.OpenTime=c[0].OpenTime,i.value=!0)}),(c,l)=>(d(),_("div",{class:g(["attraction-page",{open:a(i)}])},[t("div",B,[t("h2",null,r(a(e).ScenicSpotName),1),t("div",O,[t("div",E,[U,t("p",V,r(a(e).Address||"資料建置中"),1)]),t("div",z,[F,t("p",M,r(a(e).OpenTime||"資料建置中"),1)]),t("div",R,[j,t("p",q,r(a(e).Phone||"資料建置中"),1)])]),t("div",G,r(a(e).DescriptionDetail),1)]),t("div",H,[a(e).Picture.PictureUrl1?(d(),_("div",{key:0,class:"right-page-img",style:A(m)},null,4)):(d(),_("div",J))]),t("div",{class:"page-bar",onClick:l[0]||(l[0]=p=>i.value=!a(i))},[t("div",{class:g(["triangle",{active:a(i)}])},null,2)])],2))}},X={__name:"Attractions",setup(S){const o=f(),{userLocation:e,searchParams:i,cityDataList:m,attractionsTab:c,chooseAttraction:l}=h(o),p=T([]);y(async()=>{if(I(),l.value={},e.value.length>0){const s=await o.getUserCityName(e.value[0],e.value[1]);if("city"in s||"county"in s){const n=m.value.find(u=>u.city_name==s.city||u.city_name==s.county);n&&(v(n.city_value),i.value.city=n.city_value)}}});const v=async s=>{let n;c.value==1?n=await o.getAttractionsData(s):n=await o.getRestaurantData(s),n.map((u,k)=>{u.sid=k}),x(n),p.value=n},D=async s=>{c.value=s,s==2&&setTimeout(()=>{c.value=1,alert("餐廳資料建置中!!")},500)};return(s,n)=>(d(),_($,null,[L(C,{cardList:p.value,tab:a(c),onChangeCity:v,onChangeTab:D},null,8,["cardList","tab"]),a(w).isEmpty(a(l))?N("",!0):(d(),P(K,{key:a(l).ScenicSpotID}))],64))}};export{X as default};
