import{_ as D,a as A}from"./sidebar-ff632dbc.js";import{u as f,s as h,A as b,o as y,b as d,e as m,f as t,t as r,d as e,B as T,n as g,r as I,a as x,C as L,g as P,c as B,q as N,F as $}from"./index-043b3ef7.js";const w={class:"left-page"},O={class:"col-12 contact"},U={class:"col-12 d-flex align-items-center"},V=t("i",{class:"fas fa-map-marker-alt"},null,-1),z={class:"ms-1 oneline"},E={class:"col-12 d-flex align-items-center"},F=t("i",{class:"fas fa-clock"},null,-1),M={class:"ms-1 oneline"},R={class:"col-12 d-flex align-items-center"},j=t("i",{class:"fas fa-phone-alt"},null,-1),q={class:"ms-1 oneline"},G={class:"info mt-2"},H={class:"right-page"},J={key:1,class:"right-page-img default"},K={__name:"attractionsInfo",setup(S){const o=f(),{chooseAttraction:a,open:i}=h(o),u=b({backgroundImage:`url(${a.value.Picture.PictureUrl1})`});return console.log(u),y(async()=>{const c=await o.getAttractionsMoreInfo(`contains(ScenicSpotID,'${a.value.ScenicSpotID}')`);c.length>0&&(a.Address=c[0].Address,a.OpenTime=c[0].OpenTime,i.value=!0)}),(c,l)=>(d(),m("div",{class:g(["attraction-page",{open:e(i)}])},[t("div",w,[t("h2",null,r(e(a).ScenicSpotName),1),t("div",O,[t("div",U,[V,t("p",z,r(e(a).Address||"資料建置中"),1)]),t("div",E,[F,t("p",M,r(e(a).OpenTime||"資料建置中"),1)]),t("div",R,[j,t("p",q,r(e(a).Phone||"資料建置中"),1)])]),t("div",G,r(e(a).DescriptionDetail),1)]),t("div",H,[e(a).Picture.PictureUrl1?(d(),m("div",{key:0,class:"right-page-img",style:T(u)},null,4)):(d(),m("div",J))]),t("div",{class:"page-bar",onClick:l[0]||(l[0]=p=>i.value=!e(i))},[t("div",{class:g(["triangle",{active:e(i)}])},null,2)])],2))}},X={__name:"Attractions",setup(S){const o=f(),{userLocation:a,searchParams:i,cityDataList:u,attractionsTab:c,chooseAttraction:l}=h(o),p=I([]);y(async()=>{if(x(),l.value={},a.value.length>0){const s=await o.getUserCityName(a.value[0],a.value[1]);if("city"in s||"county"in s){const n=u.value.find(_=>_.city_name==s.city||_.city_name==s.county);n&&(v(n.city_value),i.value.city=n.city_value)}}});const v=async s=>{let n;c.value==1?n=await o.getAttractionsData(s):n=await o.getRestaurantData(s),n.map((_,C)=>{_.sid=C}),L(n),p.value=n},k=async s=>{c.value=s,s==2&&setTimeout(()=>{c.value=1,alert("餐廳資料建置中!!")},500)};return(s,n)=>(d(),m($,null,[P(D,{cardList:p.value,tab:e(c),onChangeCity:v,onChangeTab:k},null,8,["cardList","tab"]),e(A).isEmpty(e(l))?N("",!0):(d(),B(K,{key:e(l).ScenicSpotID}))],64))}};export{X as default};
